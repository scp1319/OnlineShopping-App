<!DOCTYPE html>
<html>
<head>
<meta charset="ISO-8859-1">
<link rel="stylesheet" type="text/css" href="css/styleregister.css">
<title>Insert title here</title>
</head>
<script src="https://code.jquery.com/jquery-3.4.1.js">
	
</script>

<script>
var retailerId = sessionStorage.getItem("retailerId");
	$(function() {
		$.ajax({
			url : 'dispCategory.lti',
			method : 'GET',
			contentType : 'application/json',
			success : function(response) {
				var catgsel = $("<select/>");
				catgsel.attr("id", "catgsel")
				$.each(response, function(index, catg) {
					var catgopt = $("<option/>").attr("value", catg.catgId)
							.text(catg.name);
					catgsel.append(catgopt);
				})
				$("#assignCatgToProductFrm").append(catgsel);
			}
		})

		$("#addProduct").click(function(evt) {
			evt.preventDefault();
			alert($("#catgsel").val());
			var formData = new FormData();
			formData.append("document", $("#upload").get(0).files[0]);
			formData.append("name", $("#name").val());
			formData.append("brand", $("#brand").val());
			formData.append("description", $("#description").val());
			formData.append("price", $("#price").val());
			formData.append("stock", $("#stock").val());
			formData.append("retailerId", retailerId);
			formData.append("categoryId", $("#catgsel").val());
			$.ajax({
				url : 'addProductInfo.lti',
				method : 'POST',
				data : formData,
				processData : false,
				contentType : false,
			});
		});
	})
</script>
</head>
<body>
	<div>
		<ul>
			<li><div class="logo-add">
					<img class="logo-size" src="img/logo.jpg">Shoppe
				</div></li>
	</div>
	</ul>

	<div class="head">Add Product</div>
	<div id="myForm">
		<form class="form-container" id="top">
			<label for="Name"><b>Product Name</b></label> <input type="text"
				placeholder="Enter Name" name="name" id="name" required> <label
				for="Brand"><b>Brand</b></label> <input type="text"
				placeholder="Enter Name" name="brand" id="brand" required> <label
				for="Description"><b>Description</b></label> <input type="text"
				placeholder="Enter Description" name="description" id="description"
				required> <label for="Price"><b> Price</b></label> <input
				type="number" placeholder="Enter Price" id="price" required>

			<label for="Stock"><b> Stock</b></label> <input type="number"
				placeholder="Enter Stock" id="stock" required>  <label
				for="image"><b>Upload</b></label> <input type="file" id="upload"
				required><br> <br>
			<div id="assignCatgToProductFrm">
				<b>Category: </b>
			</div>
			<br>
			<button formaction="#" type="submit" class="btn" id="addProduct">Done</button>

		</form>
	</div>
</body>
</html>
